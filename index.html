<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Craft | Retro Computer Edition</title>
    <style>
        /* Retro Computer Styling */
        :root {
            --dark-gray: #333333;
            --medium-gray: #555555;
            --light-gray: #777777;
            --terminal-green: #00ff00;
            --terminal-dark-green: #008800;
            --amber: #ffb000;
            --dark-amber: #cc8c00;
            --white: #cccccc;
            --black: #111111;
            --blue: #0066cc;
            --dark-blue: #004499;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', 'Lucida Console', monospace;
        }

        body {
            background-color: #222222;
            color: var(--white);
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 2s ease;
        }

        /* Rainbow mode */
        body.rainbow-mode {
            animation: rainbowBackground 10s linear infinite;
        }

        @keyframes rainbowBackground {
            0% { background-color: #ff0000; }
            16% { background-color: #ff7f00; }
            33% { background-color: #ffff00; }
            50% { background-color: #00ff00; }
            66% { background-color: #0000ff; }
            83% { background-color: #4b0082; }
            100% { background-color: #9400d3; }
        }

        /* CRT monitor effect */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            z-index: 100;
            pointer-events: none;
        }

        .crt-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 100px rgba(0, 255, 0, 0.1);
            z-index: 99;
            pointer-events: none;
        }

        .computer-case {
            width: 800px;
            background: linear-gradient(to bottom, #555555, #333333);
            border: 12px solid #222222;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7), 
                        inset 0 0 20px rgba(0, 0, 0, 0.5);
            position: relative;
            padding: 20px;
        }

        .monitor-frame {
            background: linear-gradient(to bottom, #444444, #222222);
            border: 8px solid #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
        }

        .screen {
            background-color: #0a0a0a;
            border: 2px solid #333333;
            border-radius: 4px;
            padding: 20px;
            min-height: 500px;
            box-shadow: inset 0 0 10px rgba(0, 100, 0, 0.3);
        }

        .power-light {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            background-color: var(--terminal-green);
            border-radius: 50%;
            box-shadow: 0 0 5px var(--terminal-green);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .branding {
            text-align: center;
            margin-bottom: 15px;
            color: var(--terminal-green);
            text-shadow: 0 0 5px var(--terminal-green);
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 10px;
        }

        h1 {
            font-size: 24px;
            letter-spacing: 2px;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        .crafting-section, .inventory-section {
            background-color: rgba(20, 20, 20, 0.8);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        h2 {
            margin-bottom: 12px;
            font-size: 16px;
            color: var(--terminal-green);
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 5px;
        }

        .elements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .element {
            background-color: var(--dark-gray);
            border: 1px solid var(--light-gray);
            border-radius: 2px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            color: var(--white);
        }

        .element:hover {
            background-color: var(--medium-gray);
            border-color: var(--terminal-green);
        }

        .element:active {
            transform: translateY(1px);
        }

        .crafting-area {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            min-height: 100px;
            background-color: rgba(30, 30, 30, 0.8);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            padding: 10px;
            position: relative;
        }

        .slot {
            width: 70px;
            height: 70px;
            border: 1px dashed var(--light-gray);
            border-radius: 2px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(40, 40, 40, 0.8);
            font-size: 12px;
            text-align: center;
            padding: 5px;
            color: var(--white);
        }

        .slot.highlight {
            border-color: var(--terminal-green);
            background-color: rgba(0, 50, 0, 0.3);
        }

        .plus-sign {
            font-size: 20px;
            font-weight: bold;
            color: var(--terminal-green);
        }

        .combine-btn {
            background-color: var(--dark-blue);
            color: var(--white);
            border: 1px solid var(--light-gray);
            padding: 8px 16px;
            border-radius: 2px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 10px;
        }

        .combine-btn:hover {
            background-color: var(--blue);
            border-color: var(--terminal-green);
        }

        .combine-btn:active {
            transform: translateY(1px);
        }

        .combine-btn:disabled {
            background-color: var(--dark-gray);
            color: var(--light-gray);
            cursor: not-allowed;
        }

        .combine-btn:disabled:hover {
            background-color: var(--dark-gray);
            border-color: var(--light-gray);
        }

        .result-section {
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            text-align: center;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(30, 30, 30, 0.8);
            font-size: 12px;
        }

        .success {
            color: var(--terminal-green);
            border-color: var(--terminal-green);
        }

        .error {
            color: #ff5555;
            border-color: #ff5555;
        }

        .new-element {
            animation: pop 0.3s ease;
        }

        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .inventory-elements {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 5px;
            background-color: rgba(30, 30, 30, 0.8);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
        }

        .inventory-element {
            background-color: var(--dark-gray);
            border: 1px solid var(--light-gray);
            border-radius: 2px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            color: var(--white);
        }

        .inventory-element:hover {
            background-color: var(--medium-gray);
            border-color: var(--terminal-green);
        }

        .discovered-count {
            margin-top: 12px;
            text-align: center;
            font-style: italic;
            font-size: 12px;
            color: var(--light-gray);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .control-btn {
            background-color: var(--dark-gray);
            color: var(--white);
            border: 1px solid var(--light-gray);
            padding: 6px 12px;
            border-radius: 2px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            background-color: var(--medium-gray);
            border-color: var(--terminal-green);
        }

        .control-btn:active {
            transform: translateY(1px);
        }

        .floppy-icon {
            display: inline-block;
            width: 12px;
            height: 12px;
            background-color: var(--blue);
            border: 1px solid var(--light-gray);
            margin-right: 5px;
            position: relative;
        }

        .floppy-icon::before {
            content: "";
            position: absolute;
            top: 2px;
            left: 2px;
            width: 6px;
            height: 4px;
            background-color: var(--white);
            border: 1px solid var(--light-gray);
        }

        .floppy-icon::after {
            content: "";
            position: absolute;
            bottom: 2px;
            left: 4px;
            width: 2px;
            height: 3px;
            background-color: var(--white);
            border: 1px solid var(--light-gray);
        }

        .copyright {
            text-align: center;
            margin-top: 20px;
            font-size: 10px;
            color: var(--light-gray);
            border-top: 1px solid var(--medium-gray);
            padding-top: 10px;
        }

        .keyboard {
            margin-top: 20px;
            height: 40px;
            background: linear-gradient(to bottom, #444444, #222222);
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--light-gray);
            font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>
    <div class="crt-glow"></div>
    
    <div class="computer-case">
        <div class="power-light"></div>
        <div class="monitor-frame">
            <div class="screen">
                <div class="branding">
                    <h1>INFINITE CRAFT</h1>
                    <div>RETRO COMPUTER EDITION</div>
                </div>

                <div class="game-area">
                    <section class="crafting-section">
                        <h2>CRAFTING AREA</h2>
                        <div class="elements-grid" id="crafting-elements">
                            <div class="element" data-element="Earth">EARTH</div>
                            <div class="element" data-element="Fire">FIRE</div>
                            <div class="element" data-element="Water">WATER</div>
                            <div class="element" data-element="Wind">WIND</div>
                        </div>

                        <div class="crafting-area">
                            <div class="slot" id="slot1"></div>
                            <div class="plus-sign">+</div>
                            <div class="slot" id="slot2"></div>
                        </div>

                        <button class="combine-btn" id="combine-btn" disabled>COMBINE ELEMENTS</button>

                        <div class="result-section" id="result-section">
                            <p>SELECT TWO ELEMENTS TO COMBINE THEM</p>
                        </div>
                    </section>

                    <section class="inventory-section">
                        <h2>DISCOVERED ELEMENTS</h2>
                        <div class="inventory-elements" id="inventory">
                            <!-- Elements will be added here dynamically -->
                        </div>
                        <div class="discovered-count">
                            <span id="discovered-count">4</span> ELEMENTS DISCOVERED
                        </div>
                    </section>
                </div>

                <div class="controls">
                    <button class="control-btn" id="save-btn">
                        <span class="floppy-icon"></span>
                        SAVE GAME
                    </button>
                    <button class="control-btn" id="load-btn">
                        LOAD GAME
                    </button>
                    <button class="control-btn" id="reset-btn">
                        RESET GAME
                    </button>
                </div>

                <div class="copyright">
                    © DEM STUDIOS 2025 | INFINITE CRAFT RETRO COMPUTER EDITION
                </div>
            </div>
        </div>
        <div class="keyboard">
            FUNCTION KEYS: [F1] HELP [F2] SAVE [F3] LOAD [F5] RESET
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            inventory: new Set(['Earth', 'Fire', 'Water', 'Wind']),
            craftingSlots: [null, null],
            rainbowMode: false,
            combinations: {
                'Earth+Fire': 'Lava',
                'Earth+Water': 'Mud',
                'Earth+Wind': 'Dust',
                'Fire+Water': 'Steam',
                'Fire+Wind': 'Smoke',
                'Water+Wind': 'Wave',
                'Water+Water': 'Rainbow', // Special combination for rainbow effect
                'Earth+Wind': 'Rainbow',  // Alternative combination for rainbow effect
                'Lava+Water': 'Stone',
                'Mud+Fire': 'Brick',
                'Steam+Earth': 'Geyser',
                'Smoke+Water': 'Fog',
                'Dust+Fire': 'Ash',
                'Wave+Earth': 'Beach',
                'Stone+Wind': 'Sand',
                'Brick+Brick': 'Wall',
                'Geyser+Stone': 'Volcano',
                'Fog+Wind': 'Cloud',
                'Ash+Water': 'Potion',
                'Beach+Wave': 'Surf',
                'Sand+Fire': 'Glass',
                'Wall+Wall': 'House',
                'House+Fire': 'Firehouse',
                'Firehouse+Water': 'Firetruck',
                'Cloud+Water': 'Rain',
                'Rain+Earth': 'Plant',
                'Plant+Fire': 'Tobacco',
                'Glass+Sand': 'Hourglass',
                'Hourglass+Fire': 'Time'
            }
        };

        // DOM elements
        const slots = [document.getElementById('slot1'), document.getElementById('slot2')];
        const combineBtn = document.getElementById('combine-btn');
        const resultSection = document.getElementById('result-section');
        const inventoryContainer = document.getElementById('inventory');
        const discoveredCount = document.getElementById('discovered-count');
        const resetBtn = document.getElementById('reset-btn');
        const saveBtn = document.getElementById('save-btn');
        const loadBtn = document.getElementById('load-btn');
        const craftingElements = document.getElementById('crafting-elements');

        // Initialize the game
        function initGame() {
            // Try to load saved game
            loadGame();
            
            updateInventory();
            setupElementInteractions();
            combineBtn.addEventListener('click', combineElements);
            resetBtn.addEventListener('click', resetGame);
            saveBtn.addEventListener('click', saveGame);
            loadBtn.addEventListener('click', loadGame);
            
            // Set up keyboard shortcuts
            document.addEventListener('keydown', handleKeyPress);
        }

        // Handle keyboard shortcuts
        function handleKeyPress(e) {
            switch(e.key) {
                case 'F2':
                case 'f2':
                    saveGame();
                    break;
                case 'F3':
                case 'f3':
                    loadGame();
                    break;
                case 'F5':
                case 'f5':
                    resetGame();
                    break;
            }
        }

        // Set up element interactions
        function setupElementInteractions() {
            // Crafting area elements
            document.querySelectorAll('.element').forEach(element => {
                element.addEventListener('click', () => {
                    const elementName = element.dataset.element;
                    addElementToCraftingSlot(elementName);
                });
            });
        }

        // Add element to first available crafting slot
        function addElementToCraftingSlot(elementName) {
            for (let i = 0; i < gameState.craftingSlots.length; i++) {
                if (!gameState.craftingSlots[i]) {
                    gameState.craftingSlots[i] = elementName;
                    updateSlot(i, elementName);
                    updateCombineButton();
                    break;
                }
            }
        }

        // Update a crafting slot with an element
        function updateSlot(slotIndex, elementName) {
            const slot = slots[slotIndex];
            slot.textContent = elementName.toUpperCase();
            slot.classList.add('filled');
        }

        // Update the combine button state
        function updateCombineButton() {
            const bothSlotsFilled = gameState.craftingSlots[0] && gameState.craftingSlots[1];
            combineBtn.disabled = !bothSlotsFilled;
        }

        // Combine the elements in the crafting slots
        function combineElements() {
            const element1 = gameState.craftingSlots[0];
            const element2 = gameState.craftingSlots[1];
            
            // Try both combinations (order doesn't matter)
            const combination1 = `${element1}+${element2}`;
            const combination2 = `${element2}+${element1}`;
            
            let result = gameState.combinations[combination1] || gameState.combinations[combination2];
            
            if (result) {
                // Check for special rainbow combination
                if (result === 'Rainbow') {
                    activateRainbowMode();
                    showResult("RAINBOW MODE ACTIVATED!", true);
                } else {
                    // Regular combination
                    if (!gameState.inventory.has(result)) {
                        gameState.inventory.add(result);
                        updateInventory();
                        showResult(`SUCCESS! YOU CREATED: ${result.toUpperCase()}`, true);
                        
                        // Add the new element to the crafting area with animation
                        addNewElementToCraftingArea(result);
                    } else {
                        showResult(`YOU ALREADY HAVE ${result.toUpperCase()} IN YOUR INVENTORY`, false);
                    }
                }
            } else {
                // Failed combination
                showResult("THESE ELEMENTS CANNOT BE COMBINED", false);
            }
            
            // Clear the crafting slots
            clearCraftingSlots();
            
            // Save game after each combination
            saveGame();
        }

        // Activate rainbow mode
        function activateRainbowMode() {
            document.body.classList.add('rainbow-mode');
            gameState.rainbowMode = true;
            
            // Save rainbow mode state
            saveGame();
        }

        // Add a new element to the crafting area
        function addNewElementToCraftingArea(elementName) {
            const newElement = document.createElement('div');
            newElement.className = 'element new-element';
            newElement.textContent = elementName.toUpperCase();
            newElement.dataset.element = elementName;
            
            newElement.addEventListener('click', () => {
                addElementToCraftingSlot(elementName);
            });
            
            craftingElements.appendChild(newElement);
            
            // Remove the animation class after the animation completes
            setTimeout(() => {
                newElement.classList.remove('new-element');
            }, 300);
        }

        // Show the result of a combination attempt
        function showResult(message, isSuccess) {
            resultSection.textContent = message;
            resultSection.className = 'result-section ' + (isSuccess ? 'success' : 'error');
        }

        // Clear the crafting slots
        function clearCraftingSlots() {
            gameState.craftingSlots = [null, null];
            slots.forEach(slot => {
                slot.textContent = '';
                slot.classList.remove('filled');
            });
            updateCombineButton();
        }

        // Update the inventory display
        function updateInventory() {
            inventoryContainer.innerHTML = '';
            gameState.inventory.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'inventory-element';
                elementDiv.textContent = element.toUpperCase();
                elementDiv.addEventListener('click', () => {
                    addElementToCraftingSlot(element);
                });
                inventoryContainer.appendChild(elementDiv);
            });
            discoveredCount.textContent = gameState.inventory.size;
        }

        // Save game to localStorage
        function saveGame() {
            const saveData = {
                inventory: Array.from(gameState.inventory),
                rainbowMode: gameState.rainbowMode
            };
            
            localStorage.setItem('infiniteCraftSave', JSON.stringify(saveData));
            showResult("GAME SAVED SUCCESSFULLY", true);
            
            // Create a downloadable save file
            createDownloadableSave(saveData);
        }

        // Create a downloadable save file
        function createDownloadableSave(saveData) {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(saveData));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "infinite_craft_save.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        }

        // Load game from localStorage or file
        function loadGame() {
            // Try to load from localStorage first
            const savedGame = localStorage.getItem('infiniteCraftSave');
            
            if (savedGame) {
                try {
                    const saveData = JSON.parse(savedGame);
                    
                    gameState.inventory = new Set(saveData.inventory);
                    gameState.rainbowMode = saveData.rainbowMode || false;
                    
                    if (gameState.rainbowMode) {
                        document.body.classList.add('rainbow-mode');
                    }
                    
                    updateInventory();
                    clearCraftingSlots();
                    
                    // Rebuild crafting area with all discovered elements
                    rebuildCraftingArea();
                    
                    showResult("GAME LOADED SUCCESSFULLY", true);
                } catch (e) {
                    showResult("ERROR LOADING SAVE DATA", false);
                    console.error("Error loading save data:", e);
                }
            } else {
                showResult("NO SAVE DATA FOUND", false);
            }
        }

        // Rebuild crafting area with all discovered elements
        function rebuildCraftingArea() {
            craftingElements.innerHTML = '';
            
            gameState.inventory.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'element';
                elementDiv.textContent = element.toUpperCase();
                elementDiv.dataset.element = element;
                
                elementDiv.addEventListener('click', () => {
                    addElementToCraftingSlot(element);
                });
                
                craftingElements.appendChild(elementDiv);
            });
        }

        // Reset the game
        function resetGame() {
            if (confirm('ARE YOU SURE YOU WANT TO RESET THE GAME? ALL PROGRESS WILL BE LOST.')) {
                gameState.inventory = new Set(['Earth', 'Fire', 'Water', 'Wind']);
                gameState.rainbowMode = false;
                document.body.classList.remove('rainbow-mode');
                clearCraftingSlots();
                updateInventory();
                showResult('GAME RESET. SELECT TWO ELEMENTS TO COMBINE THEM', false);
                
                // Reset crafting area to initial elements only
                rebuildCraftingArea();
                
                // Clear saved game
                localStorage.removeItem('infiniteCraftSave');
            }
        }

        // Initialize the game when the page loads
        document.addEventListener('DOMContentLoaded', initGame);
        
        // Try to load game on page load
        window.addEventListener('load', function() {
            // This will run after the page is fully loaded
            setTimeout(loadGame, 500);
        });
    </script>
</body>
</html>
